<!DOCTYPE html>
<html>
<head>
    <title>Ma Carte</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <style>
        #map { height: 400px; }
    </style>
</head>
<body>
    <div id="map"></div>
    <form id="pointForm">
        <input type="text" id="name" placeholder="Nom du lieu" required><br>
        <input type="text" id="description" placeholder="Description" required><br>
        <input type="number" step="0.0001" id="latitude" placeholder="Latitude" required><br>
        <input type="number" step="0.0001" id="longitude" placeholder="Longitude" required><br>
        <button type="submit">Ajouter un point</button>
    </form>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.7/firebase-database.js"></script>
    <script>
        // Initialise Firebase avec ta configuration
        const firebaseConfig = {
            apiKey: "TA_CLE_API",
            authDomain: "TON_DOMAINE.firebaseapp.com",
            databaseURL: "https://TON_DOMAINE.firebaseio.com",
            projectId: "TON_PROJET",
            storageBucket: "TON_PROJET.appspot.com",
            messagingSenderId: "TON_SENDER_ID",
            appId: "TON_APP_ID"
        };
        firebase.initializeApp(firebaseConfig);

        const database = firebase.database();
        
        // Crée la carte Leaflet
        var map = L.map('map').setView([51.505, -0.09], 13);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);

        // Ajoute un écouteur d'événement sur le formulaire
        document.getElementById('pointForm').addEventListener('submit', function(event) {
            event.preventDefault();
            // Récupère les valeurs du formulaire
            var name = document.getElementById('name').value;
            var description = document.getElementById('description').value;
            var latitude = parseFloat(document.getElementById('latitude').value);
            var longitude = parseFloat(document.getElementById('longitude').value);
            // Envoie les données à Firebase
            database.ref('points').push({
                name: name,
                description: description,
                latitude: latitude,
                longitude: longitude
            });
            // Ajoute un marqueur sur la carte
            L.marker([latitude, longitude]).addTo(map)
                .bindPopup(name + '<br>' + description)
                .openPopup();
            // Réinitialise le formulaire
            document.getElementById('pointForm').reset();
        });
    </script>
</body>
</html>
